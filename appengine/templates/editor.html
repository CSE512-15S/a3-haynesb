{% extends "base.html" %}

{% block extra_head %}
<script type="text/javascript" src="js/codemirror.js"></script>
<link href="css/codemirror.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/editor.js"></script>
<script type="text/javascript" src="js/viz.js">
	// This is from mdaines on github: http://mdaines.github.io/viz.js/viz.js
</script>
{% endblock %}

{% block editor_active %} class="active"{% endblock %}

{% block content %}
		<div class="background region">
			<div class="background menu"></div>
		</div>
		<div class="left_block menu">
			<div class="content">
				<div class="examples">
					<div>
						<em>Examples (click)</em>
					</div>
					{% for ex in examples.datalog %}
					<div class="label">{{ ex.0 }}</div>
					<div class="example">{{ ex.1 }}</div>
					{% endfor %}
				</div>
			</div>
		</div>
		<div class="right_block region">
			<div class="content">
				<output id="relational_svg"></output>
				<output id="myria_svg"></output>
			</div>
		</div>
		<div class="center_block region">
			<div class="content">
				<div class="panel panel-info">
					<div class="panel-heading">
						<h3 class="panel-title">
							Write your Datalog here, perhaps starting from one of the
							examples at the left.
						</h3>
					</div>
					<textarea cols="83" rows="2" id="query">{{ query }}</textarea>
					<button type="button" class="planner btn btn-info">Go</button>
				</div>

				<div class="panel panel-warning">
					<div class="panel-heading">
						<h3 class="panel-title">Datalog parsed as Relational Algebra</h3>
					</div>
					<div class="panel-body">
						<div id="plan" class="display"></div>
					</div>
					<div class="panel-heading"><h3 class="panel-title">Relational algebra converted and
						optimized into a Myria Physical Plan</h3></div>
					<div class="panel-body">
						<div id="optimized" class="display"></div>
					</div>
					<button type="button" class="compiler btn btn-warning">Myria
						JSON</button>
				</div>

				<div class="panel">
					<button type="button" class="executor btn btn-success">Execute
						the Query</button>
					<div class="panel-body">
						<div id="executed" class="display"></div>
					</div>
				</div>
				<div id="#response"></div>
				<div id="sig"></div>
			</div>
		</div>
{% endblock %}

{% block footer %}
<script>
	var editor = CodeMirror.fromTextArea(document.getElementById('query'), {
		mode : 'application/js',
		lineNumbers : true
	});
</script>
{% endblock %}