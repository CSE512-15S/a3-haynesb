<html>
<head>
<title>Myria Web Frontend</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="css/layout.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/codemirror.js"></script>
<link href="css/codemirror.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/editor.js"></script>
<script type="text/javascript" src="js/viz.js">
	// This is from mdaines on github: http://mdaines.github.io/viz.js/viz.js
</script>

</head>
<body>
	<nav class="navbar navbar-inverse" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target=".navbar-ex1-collapse">
				<span class="sr-only">Toggle navigation</span> <span
					class="icon-bar"></span> <span class="icon-bar"></span> <span
					class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#">Myria {{connection_string}}</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse navbar-ex1-collapse">
			<ul class="nav navbar-nav">
				<li class="active"><a href="#">Editor</a></li>
				<li><a href="#queries">Queries</a></li>
				<li><a href="#datasets">Datasets</a></li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="#">Link</a></li>
				<li class="dropdown"><a href="#" class="dropdown-toggle"
					data-toggle="dropdown">Dropdown <b class="caret"></b></a>
					<ul class="dropdown-menu">
						<li><a href="#">Action</a></li>
						<li><a href="#">Another action</a></li>
						<li><a href="#">Something else here</a></li>
						<li><a href="#">Separated link</a></li>
					</ul></li>
			</ul>
		</div>
		<!-- /.navbar-collapse -->
	</nav>

	<div class="content">
		<div class="background region">
			<div class="background menu"></div>
		</div>
		<div class="left_block menu">
			<div class="content">
				<div class="examples">
					<div>
						<em>Examples (click)</em>
					</div>
					<div class="label">Select</div>
					<div class="example">A(x) :- R(x,3)</div>
					<div class="label">Select2</div>
					<div class="example">A(x) :- R(x,y),S(y,z,4),z<3</div>
					<div class="label">Self-join</div>
					<div class="example">A(x,z) :- R(x,y),R(y,z)</div>
					<div class="label">Triangle</div>
					<div class="example">A(x,z) :- R(x,y),S(y,z),T(z,x)</div>
					<div class="label">Cross Product</div>
					<div class="example">A(x,z) :- S(x),T(z)</div>
					<div class="label">Two cycles</div>
					<div class="example">A(x,z) :- R(x,y),S(y,a,z),T(z,b,x),W(a,b)</div>
					<div class="label">Two Chained Rules</div>
					<div class="example">A(x,z) :- R(x,y,z); B(w) :- A(3,w)</div>
					<div class="label">Two Independent Rules</div>
					<div class="example">A(x,z) :- R(x,y,z); B(w) :- C(3,w)</div>
					<br> <br>
					<div class="label">Project TwitterK</div>
					<div class="example">JustX(x) :- TwitterK(x,y)</div>
					<div class="label">Self Join TwitterK</div>
					<div class="example">SelfJoin(x,z) :- TwitterK(x,y), TwitterK(y,z)</div>
					<div class="label">Triangles TwitterK</div>
					<div class="example">Triangles(x,y,z) :- TwitterK(x,y), TwitterK(y,z), TwitterK(z,x)</div>
				</div>
			</div>
		</div>
		<div class="right_block region">
			<div class="content">
				<output id="relational_svg"></output>
				<output id="myria_svg"></output>
			</div>
		</div>
		<div class="center_block region">
			<div class="content">
				<div class="instructions">1) Write your datalog here, perhaps
					starting from one of the examples at the left</div>
				<div class="instructions">(Note: Recursion and aggregation are
					still being tested)</div>
				<textarea cols="83" rows="2" id="query">{{ query }}</textarea>
				<div></div>
				<input class="planner" type="submit" value="Go">

				<div class="instructions">2) Datalog parsed as Relational
					Algebra</div>
				<div class="display" id="plan"></div>
				<div class="instructions">3) Relational algebra converted and
					optimized into a Myria Physical Plan</div>

				<div class="display" id="optimized"></div>
				<div class="instructions">4) Execute the query:</div>
				<input class="executor" type="submit" value="Execute">
				<div class="display" id="executed"></div>
				<div class="instructions">5) Download the Myria plan as JSON:</div>
				<input class="compiler" type="submit" value="Compile">
				<div id="#response"></div>
				<div id="sig"></div>
			</div>
		</div>
	</div>
</body>
<script>
	var editor = CodeMirror.fromTextArea(document.getElementById('query'), {
		mode : 'application/js',
		lineNumbers : true
	});
</script>
</html>
