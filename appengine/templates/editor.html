<html>
<head>
<title>Myria Web Frontend</title>

<link href="css/layout.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/codemirror.js"></script>
<link href="css/codemirror.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/editor.js"></script>
<script type="text/javascript" src="js/viz.js">
	// This is from mdaines on github: http://mdaines.github.io/viz.js/viz.js
</script>

</head>
<body>
	<div class="content">
		<div class="top_block header">
			<div class="content" class="title">
				<h2>Myria Web Frontend {{connection_string}}</h2>
			</div>
		</div>
		<div class="background region">
			<div class="background menu"></div>
		</div>
		<div class="left_block menu">
			<div class="content">
				<div class="examples">
					<div>
						<em>Examples (click)</em>
					</div>
					<div class="label">Select</div>
					<div class="example">A(x) :- R(x,3)</div>
					<div class="label">Select2</div>
					<div class="example">A(x) :- R(x,y),S(y,z,4),z<3</div>
					<div class="label">Self-join</div>
					<div class="example">A(x,z) :- R(x,y),R(y,z)</div>
					<div class="label">Triangle</div>
					<div class="example">A(x,z) :- R(x,y),S(y,z),T(z,x)</div>
					<div class="label">Cross Product</div>
					<div class="example">A(x,z) :- S(x),T(z)</div>
					<div class="label">Two cycles</div>
					<div class="example">A(x,z) :- R(x,y),S(y,a,z),T(z,b,x),W(a,b)</div>
					<div class="label">Two Chained Rules</div>
					<div class="example">A(x,z) :- R(x,y,z); B(w) :- A(3,w)</div>
					<div class="label">Two Independent Rules</div>
					<div class="example">A(x,z) :- R(x,y,z); B(w) :- C(3,w)</div>
					<br> <br>
					<div class="label">Project TwitterK</div>
					<div class="example">JustX(x) :- TwitterK(x,y)</div>
					<div class="label">Self Join TwitterK</div>
					<div class="example">SelfJoin(x,z) :- TwitterK(x,y), TwitterK(y,z)</div>
					<div class="label">Triangles TwitterK</div>
					<div class="example">Triangles(x,y,z) :- TwitterK(x,y), TwitterK(y,z), TwitterK(z,x)</div>
				</div>
			</div>
		</div>
		<div class="right_block region">
			<div class="content">
				<output id="relational_svg"></output>
				<output id="myria_svg"></output>
			</div>
		</div>
		<div class="center_block region">
			<div class="content">
				<div class="instructions">1) Write your datalog here, perhaps
					starting from one of the examples at the left</div>
				<div class="instructions">(Note: Recursion and aggregation are
					still being tested)</div>
				<textarea cols="83" rows="2" id="query">{{ query }}</textarea>
				<div></div>
				<input class="planner" type="submit" value="Go">

				<div class="instructions">2) Datalog parsed as Relational
					Algebra</div>
				<div class="display" id="plan"></div>
				<div class="instructions">3) Relational algebra converted and
					optimized into a Myria Physical Plan</div>

				<div class="display" id="optimized"></div>
				<div class="instructions">4) Execute the query:</div>
				<input class="executor" type="submit" value="Execute">
				<div class="display" id="executed"></div>
				<div class="instructions">5) Download the Myria plan as JSON:</div>
				<input class="compiler" type="submit" value="Compile">
				<div id="#response"></div>
				<div id="sig"></div>
			</div>
		</div>
	</div>
</body>
<script>
	var editor = CodeMirror.fromTextArea(document.getElementById('query'), {
		mode : 'application/js',
		lineNumbers : true
	});
</script>
</html>
